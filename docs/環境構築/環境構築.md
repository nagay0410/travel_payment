# 環境構築手順（Ubuntu 20.04 / WSL）

## 1. 前提
- OS: Ubuntu 20.04 (WSL 含む)
- 権限: sudo 実行可能
- ポート: 5000 をAPIで使用

## 2. .NET SDK 8.0 のインストール
```bash
sudo apt-get update -y
sudo apt-get install -y wget gpg apt-transport-https
wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O /tmp/packages-microsoft-prod.deb
sudo dpkg -i /tmp/packages-microsoft-prod.deb
sudo apt-get update -y
sudo apt-get install -y dotnet-sdk-8.0

# 確認
dotnet --info
```

## 3. リポジトリの取得
```bash
git clone <your-repo-url> travel_payment
cd travel_payment
```

## 4. 開発用APIの起動
```bash
# ビルド
dotnet build TravelPayment.sln

# 起動（HTTPのみ）
dotnet run --project src/API/API.csproj --urls http://0.0.0.0:5000
```

- ヘルスチェック: `http://localhost:5000/health`
- Swagger UI: `http://localhost:5000/swagger`

## 5. よくあるエラーと対処
- Swaggerが 500 エラー: `Program.cs` に以下があるか確認
  ```csharp
  builder.Services.AddEndpointsApiExplorer();
  builder.Services.AddSwaggerGen();
  // ...
  if (app.Environment.IsDevelopment()) { app.UseSwagger(); app.UseSwaggerUI(); }
  ```
- ポート競合: `--urls` のポートを変更
- 証明書関連メッセージ: `--no-https` で作成していれば無視可
