# 環境構築手順

## 1. 前提
- OS: Windows 10/11 (winget 利用推奨) または Ubuntu 20.04 (WSL 含む)
- 権限: 管理者権限または sudo 実行可能
- ポート: 5000 を API で使用

## 2. .NET SDK 8.0 のインストール
### Windows
```powershell
winget install Microsoft.DotNet.SDK.8
```

### Ubuntu
```bash
sudo apt-get update -y
sudo apt-get install -y wget gpg apt-transport-https
wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O /tmp/packages-microsoft-prod.deb
sudo dpkg -i /tmp/packages-microsoft-prod.deb
sudo apt-get update -y
sudo apt-get install -y dotnet-sdk-8.0
```

## 3. Node.js & Angular CLI のインストール (フロントエンド開発用)
### Windows
```powershell
# Node.js (LTS)
winget install OpenJS.NodeJS.LTS
# Angular CLI
npm install -g @angular/cli@17
```

### Ubuntu
```bash
# Node.js (nvm経由推奨)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
source ~/.bashrc
nvm install 20
# Angular CLI
npm install -g @angular/cli@17
```

## 4. リポジトリの取得とビルド
```bash
git clone <your-repo-url> travel_payment
cd travel_payment

# バックエンドビルド
dotnet build TravelPayment.sln

# フロントエンド依存関係インストール
cd src/Web
npm install
```

## 5. 実行方法
### バックエンド (API)
```bash
dotnet run --project src/API/API.csproj --urls http://0.0.0.0:5000
```
- ヘルスチェック: `http://localhost:5000/health`
- Swagger UI: `http://localhost:5000/swagger`

### フロントエンド (Angular)
```bash
cd src/Web
npm start
```
- デバッグ実行: `http://localhost:4200`

## 6. よくあるエラーと対処
- Node.js が認識されない: 新しいターミナルを開くか `env:Path` の再読み込みを行う。
- Swaggerが 500 エラー: DB 接続文字列やマイグレーション状況を確認。
- ポート競合: `--urls` または `proxy.conf.json` の設定を変更。
